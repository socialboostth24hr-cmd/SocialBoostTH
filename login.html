<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š | SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#f8f3ec;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#fff;
  padding:26px;
  border-radius:20px;
  width:100%;
  max-width:360px;
  box-shadow:0 20px 40px rgba(0,0,0,.1);
  text-align:center;
}
.logo{
  width:120px;
  margin-bottom:10px;
}
h2{
  margin:10px 0;
  color:#8b5e3c;
}
input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:14px;
}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  background:#8b5e3c;
  color:#fff;
  font-size:15px;
  cursor:pointer;
}
button:disabled{
  opacity:.6;
}
.error{
  color:#d00000;
  font-size:13px;
  margin-top:8px;
}
</style>
</head>

<body>

<div class="card">
  <!-- ðŸ”° à¹‚à¸¥à¹‚à¸à¹‰à¸£à¹‰à¸²à¸™ -->
  <img src="logo.png" class="logo" alt="SocialBoostTH">

  <h2>à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</h2>

  <input type="text" id="username" placeholder="à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰">
  <input type="password" id="password" placeholder="à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™">

  <button onclick="login()">à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</button>

  <div id="error" class="error"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwN8tuMRzZq29RUp25gh1klRlbnVToVL1I8zCCoEW9PMK_KqbL1Zf8VUsQSAQ_6-A-AnQ/exec";

function login(){
  const btn = document.querySelector('button');
  const error = document.getElementById('error');
  btn.disabled = true;
  error.textContent = '';

  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();

  if(!username || !password){
    error.textContent = 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¸°à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™';
    btn.disabled = false;
    return;
  }

  fetch(API, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      action: 'login',
      username,
      password
    })
  })
  .then(res => res.json())
  .then(data => {
    if(!data.success){
      error.textContent = data.message || 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ';
      btn.disabled = false;
      return;
    }

    // âœ… Login à¸ªà¸³à¹€à¸£à¹‡à¸ˆ â†’ à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥
    localStorage.setItem('user_id', data.user.user_id);
    localStorage.setItem('username', data.user.username);
    localStorage.setItem('credit', data.user.credit);

    // âžœ à¹„à¸›à¸«à¸™à¹‰à¸²à¹€à¸¥à¸·à¸­à¸à¸šà¸£à¸´à¸à¸²à¸£
    window.location.href = "services.html";
  })
  .catch(() => {
    error.textContent = 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸£à¸°à¸šà¸šà¹„à¸”à¹‰';
    btn.disabled = false;
  });
}
</script>

</body>
</html>
