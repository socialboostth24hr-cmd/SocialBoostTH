<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>เลือกบริการ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#0b0216;color:#fff}
.box{max-width:420px;margin:30px auto;padding:20px}
.service{background:#14062b;border-radius:18px;padding:16px;margin-bottom:12px}
button{width:100%;padding:12px;border-radius:14px;border:none;
background:linear-gradient(90deg,#8b5cf6,#ec4899);color:#fff;font-weight:800}
</style>
</head>
<body>

<div class="box">
  <h2>เลือกบริการ</h2>
  <div id="list">โหลด...</div>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbyarc1hrJZzI6g_EtrpzIZLQUDSOAPM-TlndrZ4BxdEEqvHkFpftXQ7oCWEjCix6heq/exec";
if(!localStorage.getItem("user")) location.href="index.html";

fetch(API_URL,{
  method:"POST",
  body:JSON.stringify({action:"getServices"})
})
.then(r=>r.json())
.then(res=>{
  list.innerHTML="";
  res.services.forEach(s=>{
    list.innerHTML+=`
      <div class="service">
        <b>${s.service_name}</b><br>
        ราคา ${s.price} บาท / ${s.unit}<br>
        <button onclick='select(${JSON.stringify(s)})'>เลือก</button>
      </div>`;
  })
});

function select(s){
  localStorage.setItem("selectedService",JSON.stringify(s));
  location.href="order.html";
}
</script>

</body>
</html>