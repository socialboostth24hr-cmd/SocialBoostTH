<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ | SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0216;
  --card:#14062b;
  --border:#3b1775;
  --p:#8b5cf6;
  --pk:#ec4899;
  --soft:rgba(255,255,255,.75);
  --green:#22c55e;
  --yellow:#facc15;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui;
  background:
    radial-gradient(900px 400px at top,#2a0d52,transparent),
    linear-gradient(180deg,#0b0216,#14032a);
  color:#fff;
}
.box{max-width:420px;margin:24px auto;padding:22px}

h1{
  text-align:center;font-size:26px;font-weight:900;margin-bottom:6px;
  background:linear-gradient(90deg,var(--p),var(--pk));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.sub{text-align:center;font-size:14px;color:var(--soft);margin-bottom:18px}

/* TikTok icon */
.tiktok{
  display:flex;justify-content:center;margin-bottom:8px;
  font-size:38px;
}

/* SERVICE CARD */
.card{
  background:linear-gradient(180deg,#1a0936,var(--card));
  border:1px solid var(--border);
  border-radius:22px;
  padding:18px;
  margin-bottom:14px;
}
.name{font-size:16px;font-weight:900}
.desc{margin-top:6px;font-size:13px;color:var(--soft)}
.price{margin-top:10px;font-size:18px;font-weight:900;color:#fbcfe8}

.badge{
  display:inline-block;margin-top:10px;
  padding:4px 10px;border-radius:999px;
  font-size:12px;font-weight:900;
}
.no-warranty{background:rgba(250,204,21,.15);color:var(--yellow);border:1px solid rgba(250,204,21,.4)}
.warranty{background:rgba(34,197,94,.15);color:var(--green);border:1px solid rgba(34,197,94,.4)}

/* QTY + PROGRESS */
.qty{margin-top:12px}
.qty input{
  width:100%;padding:14px;border-radius:16px;
  border:1px solid var(--border);
  background:#120725;color:#fff;font-size:16px;
}
.progress{
  margin-top:10px;height:10px;border-radius:999px;
  background:#1e1b4b;overflow:hidden
}
.progress div{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--p),var(--pk));
  transition:.3s;
}

.buy{
  margin-top:14px;width:100%;padding:14px;
  border:none;border-radius:18px;
  font-size:16px;font-weight:900;
  background:linear-gradient(135deg,var(--p),var(--pk));
  color:#fff;cursor:pointer;
}

/* POPUP */
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.6);
  display:none;align-items:center;justify-content:center;
}
.popup{
  background:#120725;border-radius:22px;
  padding:18px;width:90%;max-width:360px;
  border:1px solid var(--border);
}
.popup h3{text-align:center;margin:0 0 10px}
.popup label{font-size:13px;line-height:1.6;color:var(--soft)}
.popup button{
  margin-top:12px;width:100%;padding:14px;
  border:none;border-radius:18px;font-weight:900;
  background:linear-gradient(135deg,var(--p),var(--pk));color:#fff;
}
</style>
</head>

<body>
<div class="box">
  <div class="tiktok">üéµ</div>
  <h1>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ TikTok</h1>
  <div class="sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</div>

  <div id="list">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</div>
</div>

<!-- POPUP -->
<div id="overlay" class="overlay">
  <div class="popup">
    <h3>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
    <label>
      <input type="checkbox" id="agree">
      ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    </label>
    <button onclick="confirmOrder()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
  </div>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbzqcCkHBrhWaz4N69ZdXPeEV9H7YV5u8IgAwTvg-BaQYsH3JP5lj0GA9ps5vrPKWIKc/exec";
const user=JSON.parse(localStorage.getItem("user"));
if(!user) location.href="index.html";

let selected=null, selectedQty=0;

fetch(API_URL,{
  method:"POST",
  body:JSON.stringify({action:"getServices"})
})
.then(r=>r.json())
.then(res=>{
  if(!res.services){list.innerHTML="‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";return;}
  list.innerHTML="";
  res.services.forEach(s=>{
    const el=document.createElement("div");
    el.className="card";
    const warranty = s.warranty==="yes";
    el.innerHTML=`
      <div class="name">${s.service_name}</div>
      <div class="desc">${s.description||""}</div>
      <div class="price">${Number(s.price).toFixed(3)} ‡∏ö‡∏≤‡∏ó / ‡∏´‡∏ô‡πà‡∏ß‡∏¢</div>
      <div class="badge ${warranty?'warranty':'no-warranty'}">
        ${warranty ? "üõ°Ô∏è ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô 180 ‡∏ß‡∏±‡∏ô ‚Ä¢ ‡∏¢‡∏≠‡∏î‡∏•‡∏î‡πÄ‡∏ï‡∏¥‡∏°‡∏ü‡∏£‡∏µ" :
                     "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‚Ä¢ ‡∏¢‡∏≠‡∏î‡∏≠‡∏≤‡∏à‡∏•‡∏î ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å"}
      </div>
      <div class="qty">
        <input type="number" min="${s.min_qty}" max="${s.max_qty}"
          placeholder="‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ ${s.min_qty} ‚Ä¢ ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ${s.max_qty}">
        <div class="progress"><div></div></div>
      </div>
      <button class="buy">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
    `;
    const input=el.querySelector("input");
    const bar=el.querySelector(".progress div");
    input.oninput=()=>{
      const v=+input.value||0;
      bar.style.width=Math.min(100,(v/s.max_qty*100))+"%";
      selected=s; selectedQty=v;
    };
    el.querySelector(".buy").onclick=()=>{
      if(!selectedQty) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô");
      document.getElementById("overlay").style.display="flex";
    };
    list.appendChild(el);
  });
});

function confirmOrder(){
  if(!document.getElementById("agree").checked)
    return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡πà‡∏≠‡∏ô");
  localStorage.setItem("selectedService",JSON.stringify({
    ...selected, qty:selectedQty
  }));
  location.href="order.html";
}
</script>
</body>
</html>
