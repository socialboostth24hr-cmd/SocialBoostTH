<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:radial-gradient(circle at top,#0f1b34,#05080f);
  color:#fff;
}
.container{
  max-width:420px;
  margin:40px auto;
  background:#0a1223;
  border-radius:18px;
  padding:24px;
}
h1{text-align:center;margin:0}
.subtitle{text-align:center;opacity:.7;margin-bottom:20px}
label{display:block;margin-top:14px;font-size:14px}
input,select{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.1);
  background:#0b1428;
  color:#fff;
}
.price{
  margin:18px 0;
  text-align:center;
  font-size:28px;
  font-weight:700;
}
button{
  width:100%;
  padding:16px;
  font-size:18px;
  font-weight:700;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
}
button:disabled{background:#374151}
</style>
</head>

<body>

<div class="container">
  <h1>SocialBoostTH</h1>
  <div class="subtitle">ระบบสั่งซื้อ TikTok อัตโนมัติ</div>

  <label>บริการ</label>
  <select id="service">
    <option value="followers_inter">ผู้ติดตามต่างชาติ</option>
    <option value="followers_th">ผู้ติดตามไทย</option>
    <option value="likes_inter">ไลก์ต่างชาติ</option>
    <option value="views_inter">วิวต่างชาติ</option>
  </select>

  <label>จำนวน</label>
  <input id="qty" type="number" placeholder="เช่น 50">

  <label>ลิงก์ TikTok</label>
  <input id="link" placeholder="https://www.tiktok.com/...">

  <div class="price" id="price">0.00 บาท</div>

  <button id="payBtn" onclick="pay()" disabled>
    ดำเนินการชำระเงิน
  </button>
</div>

<script>
/* ราคาต่อหน่วย */
const rate = {
  followers_inter: 0.6,
  followers_th: 1.39,
  likes_inter: 0.3,
  views_inter: 0.05
};

const qty = document.getElementById("qty");
const service = document.getElementById("service");
const priceBox = document.getElementById("price");
const payBtn = document.getElementById("payBtn");

function calc(){
  const q = Number(qty.value);
  if(!q || q <= 0){
    priceBox.innerText = "0.00 บาท";
    payBtn.disabled = true;
    return;
  }
  const total = q * rate[service.value];
  priceBox.innerText = total.toFixed(2) + " บาท";
  payBtn.disabled = false;
}

qty.oninput = calc;
service.onchange = calc;

function pay(){
  const amount = parseFloat(priceBox.innerText);
  
  fetch("https://socialboostth24hr.workers.dev", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      service: service.options[service.selectedIndex].text,
      quantity: qty.value,
      link: document.getElementById("link").value,
      amount: amount
    })
  })
  .then(r => r.json())
  .then(d => {
    if(d.checkout_url){
      window.location.href = d.checkout_url;
    }else{
      alert("สร้างลิงก์ชำระเงินไม่สำเร็จ");
      console.log(d);
    }
  })
  .catch(() => alert("ไม่สามารถเชื่อมต่อระบบได้"));
}
</script>

</body>
</html>
