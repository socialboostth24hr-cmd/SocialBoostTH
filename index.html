<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>SocialBoostTH</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#0b1220;
  color:#fff;
}
.hidden{display:none}
.container{
  max-width:420px;
  margin:40px auto;
  background:#0c162e;
  padding:26px;
  border-radius:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}
h1{text-align:center;margin:0}
p{text-align:center;opacity:.7;margin:8px 0 20px}
input,select{
  width:100%;
  padding:14px;
  border-radius:12px;
  background:#0b1428;
  border:1px solid rgba(255,255,255,.1);
  color:#fff;
  margin-bottom:14px;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
}
.nav{
  display:flex;
  justify-content:space-around;
  background:#0b1428;
  padding:12px 0;
  border-radius:14px;
  margin-bottom:18px;
}
.nav span{
  cursor:pointer;
  font-weight:700;
  opacity:.7;
}
.nav span.active{
  opacity:1;
  color:#22c55e;
}
.card{
  background:#0b1730;
  padding:16px;
  border-radius:14px;
  margin-bottom:14px;
  font-size:14px;
}
.logout{
  background:none;
  border:none;
  color:#ef4444;
  font-weight:700;
  margin-top:10px;
}
.center{text-align:center}
</style>
</head>

<body>

<!-- AUTH -->
<div class="container" id="auth">
  <h1>SocialBoostTH</h1>
  <p id="authText">เข้าสู่ระบบ</p>

  <input id="username" placeholder="ชื่อผู้ใช้">
  <input id="email" placeholder="อีเมล" class="hidden">
  <input id="password" type="password" placeholder="รหัสผ่าน">

  <button onclick="submitAuth()">ยืนยัน</button>
  <p class="center" style="margin-top:14px">
    <span onclick="toggleAuth()" style="color:#60a5fa;cursor:pointer">
      สมัคร / เข้าสู่ระบบ
    </span>
  </p>
</div>

<!-- APP -->
<div class="container hidden" id="app">

  <div class="center" style="font-size:18px;font-weight:800">
    ยอดเงินคงเหลือ: <span id="balance">0</span> บาท
  </div>

  <div class="nav">
    <span class="active" onclick="go('order')">สั่งซื้อ</span>
    <span onclick="go('wallet')">เติมเงิน</span>
    <span onclick="go('history')">ประวัติ</span>
  </div>

  <!-- ORDER -->
  <div id="orderPage">
    <select id="service">
      <option>ผู้ติดตามต่างชาติ</option>
      <option>ผู้ติดตามไทย</option>
      <option>ถูกใจต่างชาติ</option>
      <option>ถูกใจไทย</option>
      <option>วิวต่างชาติ</option>
      <option>วิวไทย</option>
      <option>คอมเมนท์ไทย</option>
    </select>

    <input id="amount" type="number" placeholder="จำนวนที่ต้องการ">
    <input id="link" placeholder="ลิงก์ TikTok">

    <button onclick="order()">สั่งซื้อ</button>
  </div>

  <!-- WALLET -->
  <div id="walletPage" class="hidden">
    <input id="topupAmount" type="number" placeholder="จำนวนเงินที่ต้องการเพิ่ม">
    <button onclick="topup()">เพิ่มยอด (จำลอง)</button>
  </div>

  <!-- HISTORY -->
  <div id="historyPage" class="hidden"></div>

  <button class="logout" onclick="logout()">ออกจากระบบ</button>
</div>

<script>
let isLogin=true;

function toggleAuth(){
  isLogin=!isLogin;
  authText.innerText=isLogin?"เข้าสู่ระบบ":"สมัครสมาชิก";
  email.classList.toggle("hidden");
}

function submitAuth(){
  const u=username.value.trim();
  const p=password.value;
  const e=email.value.trim();

  let users=JSON.parse(localStorage.getItem("users")||"{}");

  if(isLogin){
    if(users[u]&&users[u].password===p){
      localStorage.setItem("currentUser",u);
      showApp();
    }else alert("ข้อมูลไม่ถูกต้อง");
  }else{
    if(!u||!p||!e)return alert("กรอกข้อมูลให้ครบ");
    if(users[u])return alert("ชื่อผู้ใช้ซ้ำ");
    users[u]={password:p,email:e,balance:0,history:[]};
    localStorage.setItem("users",JSON.stringify(users));
    alert("สมัครสำเร็จ");
    toggleAuth();
  }
}

function showApp(){
  auth.classList.add("hidden");
  app.classList.remove("hidden");
  update();
}

function logout(){
  localStorage.removeItem("currentUser");
  location.reload();
}

function getUser(){
  const u=localStorage.getItem("currentUser");
  const users=JSON.parse(localStorage.getItem("users"));
  return {u,users};
}

function update(){
  const {u,users}=getUser();
  balance.innerText=users[u].balance;
  historyPage.innerHTML="";
  users[u].history.forEach(h=>{
    historyPage.innerHTML+=`<div class="card">${h}</div>`;
  });
}

function go(page){
  document.querySelectorAll(".nav span").forEach(s=>s.classList.remove("active"));
  event.target.classList.add("active");

  orderPage.classList.add("hidden");
  walletPage.classList.add("hidden");
  historyPage.classList.add("hidden");

  if(page==="order")orderPage.classList.remove("hidden");
  if(page==="wallet")walletPage.classList.remove("hidden");
  if(page==="history")historyPage.classList.remove("hidden");
}

function topup(){
  const a=Number(topupAmount.value);
  const {u,users}=getUser();
  users[u].balance+=a;
  users[u].history.push("เติมเงิน "+a+" บาท");
  localStorage.setItem("users",JSON.stringify(users));
  update();
}

function order(){
  const {u,users}=getUser();
  const price=Number(amount.value);
  if(users[u].balance<price)return alert("เงินไม่พอ");
  users[u].balance-=price;
  users[u].history.push("สั่งซื้อ "+service.value+" "+price+" บาท");
  localStorage.setItem("users",JSON.stringify(users));
  update();
}

if(localStorage.getItem("currentUser"))showApp();
</script>

</body>
</html>
