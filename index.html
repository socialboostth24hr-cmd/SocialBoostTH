<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(180deg,#12002b,#2a004f);
  color:#fff;
}
.box{
  max-width:420px;
  margin:40px auto;
  padding:24px;
  background:#16002f;
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}
h1{text-align:center;margin:0}
.sub{text-align:center;opacity:.8;margin-bottom:20px}
label{display:block;margin-top:12px}
input,select,button{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #3b0764;
  background:#0f0122;
  color:#fff;
  margin-top:6px;
  font-size:15px;
}
button{
  margin-top:18px;
  background:linear-gradient(90deg,#7c3aed,#5b21b6);
  border:none;
  font-weight:bold;
}
.eye{
  position:absolute;
  right:15px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  opacity:.7;
}
.group{position:relative}
.msg{text-align:center;margin-top:10px;opacity:.9}
.hr{height:1px;background:#3b0764;margin:16px 0}
.logout{margin-top:10px;background:#222}
.total{margin-top:12px;font-size:18px;text-align:center}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
  <h1>SocialBoostTH</h1>
  <div class="sub">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>

  <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
  <input id="email">

  <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <div class="group">
    <input id="password" type="password">
    <span class="eye" onclick="togglePW()">üëÅ</span>
  </div>

  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <div id="loginMsg" class="msg"></div>

  <div class="msg">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ LINE  
    <a style="color:#c4b5fd" href="https://line.me/R/ti/p/@geg4960w" target="_blank">@geg4960w</a>
  </div>
</div>

<!-- PANEL -->
<div class="box" id="panel" style="display:none">
  <h1>SocialBoostTH</h1>
  <div class="sub">‡∏™‡∏±‡πà‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>

  <div class="msg">
    üë§ <b id="username"></b><br>
    üí∞ ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï: <b id="credit"></b>
  </div>

  <div class="hr"></div>

  <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
  <select id="service">
    <option>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</option>
  </select>

  <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
  <input id="qty" type="number" value="50">

  <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏á‡∏≤‡∏ô</label>
  <input id="link" placeholder="https://tiktok.com/...">

  <div id="total" class="total">‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó</div>

  <button onclick="order()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
  <button class="logout" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<script>
/* ===== CONFIG ===== */
const LOGIN_API   = "https://hook.us2.make.com/i91b675rawoy52l11v5msfwjerf7uv31";
const SERVICE_API = "https://hook.us2.make.com/4gxvw3n89yq5nlkt8gc6n1xeqvuaupd2";

/* ===== STATE ===== */
let user = null;
let services = [];

/* ===== INIT ===== */
document.addEventListener("DOMContentLoaded",()=>{
  const saved = localStorage.getItem("user");
  if(saved){
    user = JSON.parse(saved);
    showPanel();
    loadServices();
  }
});

/* ===== LOGIN ===== */
function togglePW(){
  password.type = password.type==="password"?"text":"password";
}

function login(){
  loginMsg.innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...";
  fetch(LOGIN_API,{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      action:"login",
      email:email.value,
      password:password.value
    })
  })
  .then(r=>r.json())
  .then(d=>{
    if(!d.success) throw d.message;
    user = d.user;
    localStorage.setItem("user",JSON.stringify(user));
    showPanel();
    loadServices();
  })
  .catch(e=>{
    loginMsg.innerText=e||"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
  });
}

function showPanel(){
  loginBox.style.display="none";
  panel.style.display="block";
  username.innerText=user.fullname;
  credit.innerText=user.credit;
}

function logout(){
  localStorage.removeItem("user");
  location.reload();
}

/* ===== SERVICES ===== */
async function loadServices(){
  service.innerHTML=`<option>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</option>`;
  try{
    const r = await fetch(SERVICE_API);
    const d = await r.json();
    services = d.services.filter(s=>s.status==="active");

    service.innerHTML=`<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ --</option>`;
    services.forEach((s,i)=>{
      const o=document.createElement("option");
      o.value=i;
      o.textContent=`${s.platform} | ${s.service_name}`;
      service.appendChild(o);
    });
  }catch{
    service.innerHTML=`<option>‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>`;
  }
}

/* ===== PRICE ===== */
service.onchange = calc;
qty.oninput = calc;

function calc(){
  if(service.value===""){ total.innerText="‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó"; return; }

  const s = services[service.value];
  const q = Number(qty.value);
  const price = Number(s.price_th);

  if(q < s.min_qty || q > s.max_qty){
    total.innerText="‚ùå ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
    return;
  }

  total.innerText=`üí∞ ‡∏£‡∏ß‡∏° ${(q*price).toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
}

/* ===== ORDER (placeholder) ===== */
function order(){
  alert("‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ OK (‡∏Ç‡∏±‡πâ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏î‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï / log order)");
}
</script>

</body>
</html>