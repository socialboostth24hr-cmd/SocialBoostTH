<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
:root{
  --p:#7c3aed;
  --p2:#5b21b6;
  --bg:#0b0216;
  --card:#120726;
  --bd:#2e1065;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:radial-gradient(circle at top,#2a0b5e,#0b0216 60%);
  color:#fff;
}
.container{
  max-width:420px;
  margin:60px auto;
  padding:28px;
  background:var(--card);
  border-radius:22px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
}
h2{text-align:center;margin:0 0 6px}
.small{opacity:.75;font-size:14px;text-align:center}
label{display:block;margin-top:14px;font-size:14px}
input,select{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:14px;
  border:1px solid var(--bd);
  background:#0f0220;
  color:#fff;
  font-size:15px;
}
button{
  width:100%;
  padding:16px;
  margin-top:18px;
  border-radius:16px;
  border:none;
  font-weight:bold;
  background:linear-gradient(90deg,var(--p),var(--p2));
  color:#fff;
}
.box{
  border:1px solid var(--bd);
  border-radius:16px;
  padding:16px;
  background:#0f0220;
  margin-bottom:16px;
}
.row{
  position:relative;
}
.eye{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}
.logout{
  margin-top:10px;
  text-align:center;
  opacity:.7;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">

<h2>SocialBoostTH</h2>
<div class="small">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>

<!-- LOGIN -->
<div id="loginBox">
  <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
  <input id="email">
  <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <div class="row">
    <input id="password" type="password">
    <span class="eye" onclick="togglePW()">üëÅ</span>
  </div>
  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <div id="msg" class="small"></div>
  <div class="small" style="margin-top:10px">
    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ LINE <b>@geg4960w</b>
  </div>
</div>

<!-- PANEL -->
<div id="panel" style="display:none">
  <div class="box">
    üë§ <b id="name"></b><br>
    üí∞ ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï: <b id="credit"></b>
  </div>

  <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
  <select id="serviceSelect" onchange="recalc()">
    <option>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</option>
  </select>

  <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
  <input id="qty" type="number" value="50" oninput="recalc()">

  <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏á‡∏≤‡∏ô</label>
  <input id="link" placeholder="https://tiktok.com/...">

  <div class="box" style="margin-top:14px;text-align:center">
    üí∏ ‡∏£‡∏ß‡∏° <b id="total">0</b> ‡∏ö‡∏≤‡∏ó
  </div>

  <button onclick="order()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
  <div class="logout" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
</div>

</div>

<script>
const LOGIN_API = "https://hook.us2.make.com/i91b675rawoy52l11v5msfwjerf7uv31";
const SERVICE_API = "https://hook.us2.make.com/4gxvw3n89yq5nlkt8gc6n1xeqvuaupd2";

let user = null;
let services = [];

function togglePW(){
  password.type = password.type === "password" ? "text" : "password";
}

/* ===== LOGIN ===== */
function login(){
  msg.innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...";
  fetch(LOGIN_API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      action:"login",
      email: email.value.trim(),
      password: password.value
    })
  })
  .then(r=>r.json())
  .then(d=>{
    if(!d.success){
      msg.innerText=d.message||"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
      return;
    }
    localStorage.setItem("user",JSON.stringify(d.user));
    showPanel(d.user);
  })
  .catch(()=> msg.innerText="‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
}

/* ===== LOAD SESSION ===== */
const saved = localStorage.getItem("user");
if(saved){
  showPanel(JSON.parse(saved));
}

function showPanel(u){
  user=u;
  name.innerText=u.fullname;
  credit.innerText=u.credit;
  loginBox.style.display="none";
  panel.style.display="block";
  loadServices();
}

function logout(){
  localStorage.removeItem("user");
  location.reload();
}

/* ===== SERVICES ===== */
function loadServices(){
  fetch(SERVICE_API)
  .then(r=>r.json())
  .then(d=>{
    services = d.services || [];
    serviceSelect.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ --</option>';
    services.forEach((s,i)=>{
      serviceSelect.innerHTML +=
        `<option value="${i}">
          ${s.platform} | ${s.service_name}
        </option>`;
    });
  })
  .catch(()=>{
    serviceSelect.innerHTML='<option>‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>';
  });
}

/* ===== PRICE ===== */
function recalc(){
  if(serviceSelect.value==="") return;
  const s = services[serviceSelect.value];
  const q = +qty.value;
  if(q < s.min_qty || q > s.max_qty){
    total.innerText="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
    return;
  }
  total.innerText = (q * s.price_th).toFixed(2);
}

/* ===== ORDER (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á) ===== */
function order(){
  alert("‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡∏ï‡πà‡∏≠ webhook ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ");
}
</script>
</body>
</html>