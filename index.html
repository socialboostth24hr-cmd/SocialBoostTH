<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
:root{
  --purple:#7c3aed;
  --purple-dark:#5b21b6;
  --bg:#0b0216;
  --card:#120726;
  --border:#2e1065;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system;
  background:linear-gradient(180deg,#0b0216,#1a0438);
  color:#fff;
}

.container{
  max-width:420px;
  margin:60px auto;
  padding:26px;
  background:var(--card);
  border-radius:20px;
}

h2{text-align:center;margin:8px 0}
.desc{
  text-align:center;
  font-size:14px;
  opacity:.8;
  margin-bottom:20px;
}

label{
  font-size:14px;
  margin-top:12px;
  display:block;
}

.input-group{
  position:relative;
}

input,select{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#0f0220;
  color:#fff;
  font-size:15px;
  margin-top:6px;
}

input:focus{
  outline:none;
  border-color:var(--purple);
}

.eye-btn{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  background:none;
  border:none;
  cursor:pointer;
  padding:0;
  opacity:.7;
}
.eye-btn:hover{opacity:1}

button.main{
  width:100%;
  padding:15px;
  margin-top:22px;
  border-radius:14px;
  border:none;
  background:linear-gradient(90deg,var(--purple),var(--purple-dark));
  color:#fff;
  font-weight:bold;
  font-size:16px;
}

.box{
  background:#0f0220;
  border:1px solid var(--border);
  padding:14px;
  border-radius:14px;
  margin-bottom:16px;
}

.msg{text-align:center;font-size:14px;margin-top:10px}
.logout{
  text-align:center;
  margin-top:10px;
  font-size:13px;
  color:#fca5a5;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">
  <h2>SocialBoostTH</h2>
  <div class="desc">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>

  <!-- LOGIN -->
  <div id="loginBox">
    <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
    <input id="email" placeholder="example@email.com">

    <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <div class="input-group">
      <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      <button class="eye-btn" onclick="togglePassword()" type="button" aria-label="‡∏î‡∏π‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
        <svg id="eyeIcon" width="22" height="22" fill="none" stroke="#c4b5fd" stroke-width="2"
          viewBox="0 0 24 24">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>

    <button class="main" onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <div id="msg" class="msg"></div>
  </div>

  <!-- PANEL -->
  <div id="panel" style="display:none">
    <div class="box">
      üë§ <b id="name"></b><br>
      üí∞ ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï: <b id="credit"></b>
    </div>

    <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
    <select id="serviceSelect">
      <option>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</option>
    </select>

    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
    <input id="qty" type="number" value="0">

    <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏á‡∏≤‡∏ô</label>
    <input id="link" placeholder="https://tiktok.com/...">

    <div class="box">
      üíµ ‡∏£‡∏ß‡∏° <b id="total">0</b> ‡∏ö‡∏≤‡∏ó
    </div>

    <button class="main" onclick="order()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
    <div class="logout" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const LOGIN_API   = "https://hook.us2.make.com/i91b675rawoy52l11v5msfwjerf7uv31";
const SERVICE_API = "https://hook.us2.make.com/4gxvw3n89yq5nlkt8gc6n1xeqvuaupd2";

let user = null;
let services = {};

/* ===== TOGGLE PASSWORD ===== */
function togglePassword(){
  const pw = document.getElementById("password");
  const icon = document.getElementById("eyeIcon");

  if(pw.type === "password"){
    pw.type = "text";
    icon.innerHTML = `
      <path d="M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8
      a21.77 21.77 0 0 1 5.08-6.88"/>
      <path d="M1 1l22 22"/>
    `;
  }else{
    pw.type = "password";
    icon.innerHTML = `
      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"/>
      <circle cx="12" cy="12" r="3"/>
    `;
  }
}

/* ===== AUTO LOGIN ===== */
window.onload = () => {
  const saved = localStorage.getItem("user");
  if(saved){
    user = JSON.parse(saved);
    showPanel();
    loadServices();
  }
};

/* ===== LOGIN ===== */
function login(){
  msg.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö...";

  fetch(LOGIN_API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      action:"login",
      email: email.value.trim(),
      password: password.value
    })
  })
  .then(r=>r.json())
  .then(d=>{
    if(!d.success){
      msg.innerText = d.message || "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
      return;
    }
    user = d.user;
    localStorage.setItem("user", JSON.stringify(user));
    showPanel();
    loadServices();
  })
  .catch(()=>msg.innerText="‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
}

function showPanel(){
  name.innerText = user.fullname;
  credit.innerText = user.credit;
  loginBox.style.display="none";
  panel.style.display="block";
}

function logout(){
  localStorage.removeItem("user");
  location.reload();
}

/* ===== SERVICES ===== */
function loadServices(){
  fetch(SERVICE_API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ action:"list_services" })
  })
  .then(r=>r.json())
  .then(d=>{
    serviceSelect.innerHTML = `<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ --</option>`;
    services = {};
    d.services.forEach(s=>{
      if(s.status!=="active")return;
      services[s.service_code]=s;
      const opt=document.createElement("option");
      opt.value=s.service_code;
      opt.textContent=`${s.platform} | ${s.service_name}`;
      serviceSelect.appendChild(opt);
    });
  });
}

serviceSelect.onchange=calc;
qty.oninput=calc;

function calc(){
  const s = services[serviceSelect.value];
  const q = Number(qty.value);
  if(!s || q<s.min_qty || q>s.max_qty){
    total.innerText=0;return;
  }
  total.innerText=(q*s.price_th).toFixed(2);
}

function order(){
  alert("‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏£‡∏¥‡∏á");
}
</script>

</body>
</html>