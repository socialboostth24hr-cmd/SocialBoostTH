<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SocialBoostTH – Dashboard</title>

<style>
*{box-sizing:border-box;font-family:Inter,system-ui}

body{
  margin:0;
  background:#f4f6f9;
  color:#1f2937;
}

/* ---------- HEADER ---------- */
header{
  background:#ffffff;
  border-bottom:1px solid #e5e7eb;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.brand{
  font-size:20px;
  font-weight:800;
  color:#1d4ed8;
}

nav{
  display:flex;
  gap:18px;
}

nav span{
  cursor:pointer;
  font-weight:600;
  color:#374151;
}

nav span.active{
  color:#1d4ed8;
  border-bottom:2px solid #1d4ed8;
  padding-bottom:4px;
}

.balance{
  background:#f1f5f9;
  padding:8px 14px;
  border-radius:10px;
  font-weight:700;
}

/* ---------- CONTAINER ---------- */
.container{
  max-width:900px;
  margin:30px auto;
  padding:0 16px;
}

.card{
  background:#ffffff;
  border-radius:14px;
  padding:20px;
  box-shadow:0 8px 24px rgba(0,0,0,.05);
  margin-bottom:20px;
}

h2{
  margin-top:0;
  font-size:18px;
}

/* ---------- FORM ---------- */
label{
  font-size:14px;
  font-weight:600;
  margin-bottom:6px;
  display:block;
}

select,input,textarea{
  width:100%;
  padding:12px;
  border:1px solid #d1d5db;
  border-radius:10px;
  margin-bottom:14px;
  font-size:14px;
}

textarea{resize:none;height:90px}

.price{
  font-size:20px;
  font-weight:800;
  color:#1d4ed8;
}

button.primary{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#1d4ed8;
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}

button.secondary{
  background:none;
  border:none;
  color:#dc2626;
  font-weight:600;
  cursor:pointer;
  margin-top:10px;
}

/* ---------- TABLE ---------- */
.table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

.table th,.table td{
  padding:10px;
  border-bottom:1px solid #e5e7eb;
  text-align:left;
}

/* ---------- AUTH ---------- */
#auth{
  max-width:360px;
  margin:120px auto;
}

.auth-title{
  text-align:center;
  font-size:22px;
  font-weight:800;
  color:#1d4ed8;
}

.auth-sub{
  text-align:center;
  margin-bottom:20px;
  color:#6b7280;
}

.hidden{display:none}
</style>
</head>

<body>

<!-- AUTH -->
<div id="auth" class="card">
  <div class="auth-title">SocialBoostTH</div>
  <div class="auth-sub" id="authText">เข้าสู่ระบบ</div>

  <input id="username" placeholder="ชื่อผู้ใช้">
  <input id="email" placeholder="อีเมล" class="hidden">
  <input id="password" type="password" placeholder="รหัสผ่าน">

  <button class="primary" onclick="submitAuth()">ยืนยัน</button>

  <p style="text-align:center;margin-top:14px">
    <a href="#" onclick="toggleAuth()">สมัครสมาชิก / เข้าสู่ระบบ</a>
  </p>
</div>

<!-- APP -->
<div id="app" class="hidden">

<header>
  <div class="brand">SocialBoostTH</div>
  <nav>
    <span class="active" onclick="go('order')">สั่งซื้อ</span>
    <span onclick="go('history')">ประวัติ</span>
  </nav>
  <div class="balance">ยอดเงิน: <span id="balance">0</span> บาท</div>
</header>

<div class="container">

  <!-- ORDER -->
  <div class="card" id="orderPage">
    <h2>สั่งซื้อบริการ</h2>

    <label>บริการ</label>
    <select id="service" onchange="calculate()">
      <option>ผู้ติดตามต่างชาติ</option>
      <option>ผู้ติดตามไทย</option>
      <option>ถูกใจต่างชาติ</option>
      <option>วิวต่างชาติ</option>
      <option>คอมเมนท์ไทย</option>
    </select>

    <label>จำนวน</label>
    <input id="qty" type="number" oninput="calculate()">

    <div id="commentBox" class="hidden">
      <label>คอมเมนท์ (1 บรรทัด = 1 คอมเมนท์)</label>
      <textarea id="comments" oninput="calculate()"></textarea>
    </div>

    <label>ลิงก์ TikTok</label>
    <input id="link">

    <div class="price" id="total">0.00 บาท</div>

    <button class="primary" onclick="order()">ยืนยันการสั่งซื้อ</button>
  </div>

  <!-- HISTORY -->
  <div class="card hidden" id="historyPage">
    <h2>ประวัติการทำรายการ</h2>
    <table class="table">
      <thead>
        <tr><th>รายการ</th><th>ยอดเงิน</th></tr>
      </thead>
      <tbody id="historyTable"></tbody>
    </table>
    <button class="secondary" onclick="logout()">ออกจากระบบ</button>
  </div>

</div>
</div>

<script>
/* ---------- AUTH ---------- */
let loginMode=true;

function toggleAuth(){
  loginMode=!loginMode;
  authText.innerText=loginMode?"เข้าสู่ระบบ":"สมัครสมาชิก";
  email.classList.toggle("hidden");
}

function submitAuth(){
  const u=username.value.trim();
  const p=password.value;
  const e=email.value.trim();
  let users=JSON.parse(localStorage.getItem("users")||"{}");

  if(loginMode){
    if(users[u]&&users[u].password===p){
      localStorage.setItem("user",u);
      showApp();
    }else alert("ข้อมูลไม่ถูกต้อง");
  }else{
    if(!u||!p||!e)return alert("กรอกข้อมูลให้ครบ");
    users[u]={password:p,email:e,balance:3000,history:[]};
    localStorage.setItem("users",JSON.stringify(users));
    alert("สมัครสำเร็จ");
    toggleAuth();
  }
}

/* ---------- APP ---------- */
function showApp(){
  auth.classList.add("hidden");
  app.classList.remove("hidden");
  update();
}

function getUser(){
  const u=localStorage.getItem("user");
  const users=JSON.parse(localStorage.getItem("users"));
  return {u,users};
}

/* ---------- PRICE ---------- */
function rate(name,qty){
  if(name==="ผู้ติดตามต่างชาติ"){
    if(qty<100)return 0.6;
    if(qty<500)return 0.5;
    return 0.4;
  }
  if(name==="ผู้ติดตามไทย")return 1.39;
  if(name==="ถูกใจต่างชาติ")return 0.25;
  if(name==="วิวต่างชาติ")return 0.05;
  if(name==="คอมเมนท์ไทย")return 5;
}

function calculate(){
  const s=service.value;
  let q=0;

  commentBox.classList.toggle("hidden",s!=="คอมเมนท์ไทย");

  if(s==="คอมเมนท์ไทย"){
    q=comments.value.split("\n").filter(x=>x.trim()).length;
  }else{
    q=Number(qty.value);
  }

  if(!q){total.innerText="0.00 บาท";return}

  total.innerText=(q*rate(s,q)).toFixed(2)+" บาท";
}

function order(){
  const {u,users}=getUser();
  const amount=parseFloat(total.innerText);
  if(users[u].balance<amount)return alert("ยอดเงินไม่เพียงพอ");
  users[u].balance-=amount;
  users[u].history.push({name:service.value,amount});
  localStorage.setItem("users",JSON.stringify(users));
  update();
  alert("สั่งซื้อสำเร็จ");
}

/* ---------- UI ---------- */
function update(){
  const {u,users}=getUser();
  balance.innerText=users[u].balance.toFixed(2);
  historyTable.innerHTML="";
  users[u].history.forEach(h=>{
    historyTable.innerHTML+=`<tr><td>${h.name}</td><td>${h.amount.toFixed(2)} บาท</td></tr>`;
  });
}

function go(p){
  document.querySelectorAll("nav span").forEach(n=>n.classList.remove("active"));
  event.target.classList.add("active");
  orderPage.classList.toggle("hidden",p!=="order");
  historyPage.classList.toggle("hidden",p!=="history");
}

function logout(){
  localStorage.removeItem("user");
  location.reload();
}

if(localStorage.getItem("user"))showApp();
</script>

</body>
</html>
