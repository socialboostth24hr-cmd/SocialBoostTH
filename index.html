<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SocialBoostTH</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:radial-gradient(circle at top,#0f1b34,#05080f);
  color:#fff;
}

.container{
  max-width:420px;
  margin:40px auto;
  background:rgba(10,18,35,.88);
  border-radius:20px;
  padding:26px;
  box-shadow:0 25px 70px rgba(0,0,0,.6);
}

h1{text-align:center;margin:0;font-size:28px;}
.subtitle{text-align:center;opacity:.8;margin-bottom:24px;}

label{display:block;margin-top:16px;font-size:14px;opacity:.85;}

select,input,textarea{
  width:100%;
  margin-top:6px;
  padding:13px;
  border-radius:12px;
  background:#0b1428;
  border:1px solid rgba(255,255,255,.1);
  color:#fff;
  font-size:15px;
}

textarea{resize:none;height:90px;}

.hint{font-size:12px;opacity:.6;margin-top:4px;}

.price-box{
  margin-top:20px;
  background:#0c1933;
  padding:18px;
  border-radius:14px;
  text-align:center;
}

.total{font-size:26px;font-weight:800;}
.discount{font-size:13px;color:#22c55e;margin-top:6px;}

.checkbox{
  margin-top:18px;
  display:flex;
  gap:10px;
  align-items:center;
  font-size:14px;
}

.pay-btn{
  width:100%;
  margin-top:22px;
  padding:16px;
  font-size:18px;
  font-weight:800;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  cursor:pointer;
}

.pay-btn:disabled{
  background:#374151;
  cursor:not-allowed;
}

.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.popup-content{
  max-width:520px;
  background:#0c162e;
  border-radius:18px;
  padding:24px;
  font-size:14px;
  line-height:1.6;
}
</style>
</head>

<body>

<div class="container">
  <h1>SocialBoostTH</h1>
  <div class="subtitle">ระบบสั่งซื้อ TikTok อัตโนมัติ</div>

  <label>บริการ</label>
  <select id="service">
    <option value="followers_inter">ผู้ติดตามต่างชาติ</option>
    <option value="followers_th">ผู้ติดตามไทย</option>
    <option value="likes_inter">ถูกใจต่างชาติ</option>
    <option value="likes_th">ถูกใจไทย</option>
    <option value="views_inter">วิวต่างชาติ</option>
    <option value="views_th">วิวไทย</option>
    <option value="comment_th">คอมเมนท์ไทย</option>
  </select>

  <label>จำนวน</label>
  <input type="number" id="quantity" placeholder="กรอกจำนวนที่ต้องการ">
  <div class="hint" id="limitText"></div>

  <label id="linkLabel">ลิงก์ TikTok</label>
  <input type="text" id="link" placeholder="https://www.tiktok.com/...">

  <div class="price-box">
    <div class="total" id="totalPrice">0.00 บาท</div>
    <div class="discount" id="discountText"></div>
  </div>

  <div class="checkbox">
    <input type="checkbox" id="agree">
    <span>ยอมรับ <a href="#" onclick="openPopup()">ข้อกำหนดและเงื่อนไข</a></span>
  </div>

  <button class="pay-btn" id="payBtn" onclick="pay()" disabled>
    ดำเนินการชำระเงิน
  </button>
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <p>
      ❗ การสั่งซื้อไม่สามารถยกเลิกหรือคืนเงินได้<br>
      กรุณาตรวจสอบข้อมูลให้ถูกต้องก่อนชำระเงิน
    </p>
    <button onclick="closePopup()">รับทราบ</button>
  </div>
</div>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbynbP2epKwQOrh-hsM3RhmLpUMkGEaZwXrZta8qMVotTVa3SIg5P5-ARWatJOY2jNZI/exec";

const services={
 followers_inter:{min:50,max:10000,rate:q=>q<100?0.6:q<500?0.5:q<1000?0.4:0.256},
 followers_th:{min:20,max:5000,rate:q=>1.39},
 likes_inter:{min:50,max:10000,rate:q=>0.25},
 likes_th:{min:20,max:2000,rate:q=>2},
 views_inter:{min:1000,max:100000,rate:q=>0.05},
 views_th:{min:1000,max:10000,rate:q=>0.1},
 comment_th:{min:10,max:50,rate:q=>5}
};

const service=document.getElementById('service');
const quantity=document.getElementById('quantity');
const totalPrice=document.getElementById('totalPrice');
const limitText=document.getElementById('limitText');
const discountText=document.getElementById('discountText');
const payBtn=document.getElementById('payBtn');

function calculate(){
 const s=services[service.value];
 const q=Number(quantity.value);

 limitText.innerText=`ขั้นต่ำ ${s.min} | สูงสุด ${s.max}`;

 if(!q||q<s.min||q>s.max){
  totalPrice.innerText="0.00 บาท";
  payBtn.disabled=true;
  return;
 }

 const total=q*s.rate(q);
 totalPrice.innerText=total.toFixed(2)+" บาท";
 discountText.innerText=q>=500?"ซื้อจำนวนมาก ราคาจะลดอัตโนมัติ":"";
 checkReady();
}

function checkReady(){
 payBtn.disabled=!(
  document.getElementById('agree').checked &&
  document.getElementById('link').value &&
  Number(quantity.value)
 );
}

service.onchange=()=>{quantity.value="";calculate();}
quantity.oninput=calculate;
document.getElementById('agree').onchange=checkReady;
document.getElementById('link').oninput=checkReady;

function openPopup(){popup.style.display='flex'}
function closePopup(){popup.style.display='none'}

function pay(){
 const payload={
  service: service.options[service.selectedIndex].text,
  quantity: Number(quantity.value),
  link: document.getElementById('link').value,
  amount: parseFloat(totalPrice.innerText.replace(" บาท",""))
 };

 fetch(SCRIPT_URL,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify(payload)
 })
 .then(r=>r.json())
 .then(d=>{
  if(d.checkout_url){
    window.location.href=d.checkout_url;
  }else{
    alert("ไม่สามารถสร้างลิงก์ชำระเงินได้");
    console.log(d);
  }
 })
 .catch(err=>{
  alert("เชื่อมต่อระบบไม่ได้");
  console.error(err);
 });
}
</script>

</body>
</html>
