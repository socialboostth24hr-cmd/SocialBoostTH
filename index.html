<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#0f172a;
  color:#fff;
}
.container{
  max-width:420px;
  margin:30px auto;
  padding:24px;
  background:#020617;
  border-radius:16px;
}
h2{text-align:center;margin-bottom:10px}
.box{
  background:#020617;
  border:1px solid #1e293b;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
input,select,button{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:1px solid #1e293b;
  background:#020617;
  color:white;
  font-size:15px;
  margin-top:10px;
}
button{
  background:#7c3aed;
  border:none;
  font-weight:bold;
}
.price{
  margin-top:15px;
  font-size:18px;
  font-weight:bold;
  text-align:center;
}
.small{font-size:13px;opacity:.7}
</style>
</head>

<body>
<div class="container">

<h2>SocialBoostTH</h2>

<div class="box small">
üë§ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ<br>
üí∞ ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï: <span id="credit">50</span>
</div>

<label class="small">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
<select id="serviceSelect">
  <option>-- ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î --</option>
</select>

<label class="small">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
<input id="qty" type="number" value="50">

<label class="small">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏á‡∏≤‡∏ô</label>
<input placeholder="https://tiktok.com/...">

<div class="price" id="total">‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó</div>

<button onclick="order()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>

</div>

<script>
const WEBHOOK_URL = "PUT_YOUR_MAKE_WEBHOOK_URL_HERE";

const serviceSelect = document.getElementById("serviceSelect");
const qtyInput = document.getElementById("qty");
const totalBox = document.getElementById("total");

async function loadServices(){
  serviceSelect.innerHTML = `<option>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</option>`;

  try{
    const res = await fetch(WEBHOOK_URL);
    const data = await res.json();

    if(!data.success || !data.services){
      serviceSelect.innerHTML = `<option>‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>`;
      return;
    }

    // üî• ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô array ‡πÄ‡∏™‡∏°‡∏≠
    const services = Array.isArray(data.services)
      ? data.services
      : [data.services];

    serviceSelect.innerHTML = `<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ --</option>`;

    services.forEach(s=>{
      const opt = document.createElement("option");
      opt.value = s.service_code;
      opt.dataset.price = Number(s.price_th);
      opt.dataset.min = Number(s.min_qty);
      opt.dataset.max = Number(s.max_qty);
      opt.textContent = `${s.platform} | ${s.service_name}`;
      serviceSelect.appendChild(opt);
    });

  }catch(err){
    console.error(err);
    serviceSelect.innerHTML = `<option>‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>`;
  }
}

function calc(){
  const opt = serviceSelect.selectedOptions[0];
  if(!opt || !opt.dataset.price){
    totalBox.textContent = "‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó";
    return;
  }

  const qty = Number(qtyInput.value);
  const min = Number(opt.dataset.min);
  const max = Number(opt.dataset.max);
  const price = Number(opt.dataset.price);

  if(qty < min || qty > max){
    totalBox.textContent = "‚ùå ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
    return;
  }

  const total = qty * price;
  totalBox.textContent = `üí∞ ‡∏£‡∏ß‡∏° ${total.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
}

function order(){
  if(serviceSelect.value===""){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£");
    return;
  }
  alert("‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)");
}

serviceSelect.addEventListener("change", calc);
qtyInput.addEventListener("input", calc);

loadServices();
</script>

</body>
</html>