<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(180deg,#0b0216,#1a0438);
  color:#fff;
}
.container{
  max-width:420px;
  margin:30px auto;
  padding:24px;
  background:#120726;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
}
h1{text-align:center;margin:0}
.sub{text-align:center;opacity:.85;margin-bottom:14px;line-height:1.6}
.box{
  background:#0f0220;
  border:1px solid #2e1065;
  padding:14px;
  border-radius:12px;
  margin-top:12px;
}
label{font-size:14px;display:block;margin-top:12px}
input,select,button{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid #2e1065;
  background:#0f0220;
  color:#fff;
}
button{
  margin-top:14px;
  background:linear-gradient(90deg,#7c3aed,#5b21b6);
  border:none;
  font-weight:600;
}
button.secondary{
  background:#1f1b3a;
}
.small{font-size:13px;opacity:.75}
.total{text-align:center;font-size:18px;margin-top:10px}

.popup{
  position:fixed;inset:0;
  background:rgba(0,0,0,.65);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.popup .card{
  width:90%;
  max-width:420px;
  background:#120726;
  border-radius:16px;
  padding:20px;
}
.popup h3{margin-top:0}
.popup button{margin-top:10px}

.bank{
  border:1px solid #2e1065;
  border-radius:12px;
  padding:12px;
  margin-top:10px;
}
.bank b{display:block;margin-bottom:4px}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="container" id="loginBox">
  <h1>SocialBoostTH</h1>
  <div class="sub">
    ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô<br>
    <span class="small">
      ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏á LINE <b>@geg4960w</b>
    </span>
  </div>

  <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
  <input id="email">

  <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <input id="password" type="password">

  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <div id="loginMsg" class="small"></div>
</div>

<!-- PANEL -->
<div class="container" id="panel" style="display:none">
  <h1>SocialBoostTH</h1>
  <div class="sub">‡∏™‡∏±‡πà‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>

  <div class="box">
    ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô: <b id="username"></b><br>
    ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <b id="credit"></b>
  </div>

  <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
  <select id="serviceSelect"></select>

  <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
  <input id="qty" type="number" value="20">

  <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏á‡∏≤‡∏ô</label>
  <input id="link" placeholder="https://tiktok.com/...">

  <div id="total" class="total">‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó</div>

  <button onclick="openConfirm()">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
  <button class="secondary" onclick="openTopup()">üí≥ ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</button>
  <button class="secondary" onclick="showOrders()">‡∏î‡∏π‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
  <button class="secondary" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<!-- TOPUP POPUP -->
<div class="popup" id="topupPopup">
  <div class="card">
    <h3>üí≥ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>

    <div class="bank">
      <b>üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</b>
      ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <b>066-1213-728</b>
      ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏™‡∏£‡∏ß‡∏á‡∏™‡∏∏‡∏î‡∏≤ ‡∏®‡∏£‡∏µ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πå
    </div>

    <div class="bank">
      <b>üí∞ TrueMoney Wallet</b>
      ‡πÄ‡∏ö‡∏≠‡∏£‡πå: <b>099-130-1221</b>
      ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå‡∏•‡∏†‡∏±‡∏™ ‡∏®‡∏£‡∏µ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πå
    </div>

    <p class="small">
      ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
    </p>

    <button onclick="closeTopup()">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<!-- TERMS POPUP -->
<div class="popup" id="termPopup">
  <div class="card">
    <h3>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
    <p class="small">
      ‚Ä¢ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÑ‡∏î‡πâ<br>
      ‚Ä¢ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó<br>
      ‚Ä¢ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    </p>
    <button onclick="confirmOrder()">‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠</button>
    <button class="secondary" onclick="closeConfirm()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>
</div>

<script>
const SHEET_ID="10hFozE-vcdtPhX7KiGs3JTndpvxbUNDHDzhpvPxIz-4";
const USERS_API=`https://opensheet.elk.sh/${SHEET_ID}/users`;
const SERVICES_API=`https://opensheet.elk.sh/${SHEET_ID}/services`;
const ORDERS_API=`https://opensheet.elk.sh/${SHEET_ID}/orders`;
const GAS_API="https://script.google.com/macros/s/AKfycby2utfzT3R0XymWtkmH41aVHVILkm5-irLcfTe2B3ETEs0Sq6KbHc8EqrFKWDS3ja3k/exec";

let user=null, services=[];

/* LOGIN */
async function login(){
  const users=await (await fetch(USERS_API)).json();
  const u=users.find(x=>x.email?.toLowerCase()===email.value.toLowerCase()
    && String(x.password).trim()===password.value.trim());
  if(!u){loginMsg.innerText="‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";return;}
  user={user_id:u.user_id,fullname:u.fullname,credit:Number(u.credit)};
  localStorage.setItem("user",JSON.stringify(user));
  showPanel(); loadServices();
}
function showPanel(){
  loginBox.style.display="none";
  panel.style.display="block";
  username.innerText=user.fullname;
  credit.innerText=user.credit;
}
function logout(){localStorage.clear();location.reload();}

/* SERVICES */
async function loadServices(){
  services=(await (await fetch(SERVICES_API)).json()).filter(s=>s.status==="active");
  serviceSelect.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ --</option>';
  services.forEach((s,i)=>{
    const flag = s.service_code.includes("INT") ? "üåé" : "üáπüá≠";
    serviceSelect.innerHTML+=
      `<option value="${i}">${flag} ${s.platform} | ${s.service_name}</option>`;
  });
}
serviceSelect.onchange=calc; qty.oninput=calc;
function calc(){
  if(!serviceSelect.value){total.innerText="‡∏£‡∏ß‡∏° 0 ‡∏ö‡∏≤‡∏ó";return;}
  const s=services[serviceSelect.value],q=Number(qty.value);
  total.innerText=`‡∏£‡∏ß‡∏° ${(q*s.price_th).toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
}

/* ORDER FLOW */
function openConfirm(){ document.getElementById("termPopup").style.display="flex"; }
function closeConfirm(){ document.getElementById("termPopup").style.display="none"; }

async function confirmOrder(){
  closeConfirm();
  const s=services[serviceSelect.value],q=Number(qty.value);
  const amount=q*s.price_th;
  if(amount>user.credit){alert("‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠");return;}
  const res=await fetch(GAS_API,{method:"POST",body:JSON.stringify({
    user_id:user.user_id,service_code:s.service_code,
    platform:s.platform,qty:q,amount,link:link.value
  })});
  const d=JSON.parse(await res.text());
  if(!d.success){alert(d.message);return;}
  user.credit=d.credit;
  credit.innerText=d.credit;
  localStorage.setItem("user",JSON.stringify(user));
  alert("‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
}

/* TOPUP */
function openTopup(){ document.getElementById("topupPopup").style.display="flex"; }
function closeTopup(){ document.getElementById("topupPopup").style.display="none"; }

function showOrders(){ alert("‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢"); }
</script>

</body>
</html>