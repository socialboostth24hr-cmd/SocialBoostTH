<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SocialBoostTH</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:radial-gradient(circle at top,#0f1b34,#05080f);
  color:#fff;
}

.container{
  max-width:420px;
  margin:40px auto;
  background:rgba(10,18,35,.88);
  border-radius:20px;
  padding:26px;
  box-shadow:0 25px 70px rgba(0,0,0,.6);
}

h1{
  text-align:center;
  margin:0;
  font-size:28px;
  letter-spacing:.5px;
}

.subtitle{
  text-align:center;
  opacity:.8;
  margin-bottom:26px;
}

label{
  display:block;
  margin-top:16px;
  font-size:14px;
  opacity:.85;
}

select,input,textarea{
  width:100%;
  margin-top:6px;
  padding:13px;
  border-radius:12px;
  background:#0b1428;
  border:1px solid rgba(255,255,255,.08);
  color:#fff;
  font-size:15px;
}

textarea{resize:none;height:96px;}

.hint{
  font-size:12px;
  opacity:.6;
  margin-top:4px;
}

.price-box{
  margin-top:20px;
  background:#0c1933;
  padding:18px;
  border-radius:14px;
  text-align:center;
}

.price-box small{opacity:.7;}

.total{
  font-size:26px;
  font-weight:800;
  margin-top:6px;
}

.discount{
  font-size:13px;
  color:#22c55e;
  margin-top:4px;
}

.summary{
  margin-top:16px;
  background:#0b1730;
  padding:14px;
  border-radius:12px;
  font-size:14px;
  line-height:1.5;
}

.checkbox{
  margin-top:18px;
  display:flex;
  gap:10px;
  align-items:center;
  font-size:14px;
}

.checkbox input{
  width:18px;
  height:18px;
}

.pay-btn{
  width:100%;
  margin-top:22px;
  padding:16px;
  font-size:18px;
  font-weight:800;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  cursor:pointer;
  transition:.25s;
  box-shadow:0 12px 32px rgba(34,197,94,.4);
}

.pay-btn:hover{
  transform:translateY(-1px);
}

.pay-btn:disabled{
  background:linear-gradient(135deg,#374151,#1f2937);
  box-shadow:none;
  cursor:not-allowed;
}

/* popup */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.popup-content{
  max-width:520px;
  background:#0c162e;
  border-radius:18px;
  padding:24px;
  font-size:14px;
  line-height:1.7;
}

.popup-content h3{
  margin-top:0;
  font-size:18px;
}

.popup-content button{
  margin-top:16px;
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  background:#2563eb;
  color:#fff;
  font-weight:700;
}
</style>
</head>

<body>

<div class="container">
  <h1>SocialBoostTH</h1>
  <div class="subtitle">ระบบสั่งซื้อ TikTok อัตโนมัติ</div>

  <label>หมวดหมู่</label>
  <select>
    <option>TikTok</option>
  </select>

  <label>บริการ</label>
  <select id="service" onchange="updateForm()">
    <option value="followers_inter">ผู้ติดตามต่างชาติ</option>
    <option value="followers_th">ผู้ติดตามไทย</option>
    <option value="likes_inter">ถูกใจต่างชาติ</option>
    <option value="likes_th">ถูกใจไทย</option>
    <option value="views_inter">วิวต่างชาติ</option>
    <option value="views_th">วิวไทย</option>
    <option value="comment_th">คอมเมนท์ไทย</option>
  </select>

  <label>จำนวน</label>
  <input type="number" id="quantity" value="50" min="1" oninput="calculate()">
  <div class="hint" id="limitText"></div>

  <div id="commentBox" style="display:none;">
    <label>ข้อความคอมเมนท์ (1 บรรทัด = 1 คอมเมนท์)</label>
    <textarea id="commentText" placeholder="พิมพ์ 1 คอมเมนท์ ต่อ 1 บรรทัด"></textarea>
  </div>

  <label id="linkLabel">ลิงก์ช่อง TikTok</label>
  <input type="text" id="link" placeholder="https://www.tiktok.com/...">

  <div class="price-box">
    <small id="unitPrice">ราคา / หน่วย</small>
    <div class="total" id="totalPrice">0.00 บาท</div>
    <div class="discount" id="discountText"></div>
  </div>

  <div class="summary" id="summaryBox"></div>

  <div class="checkbox">
    <input type="checkbox" id="agree" onchange="checkButton()">
    <span>
      ยอมรับ <a href="#" onclick="openPopup()">ข้อกำหนดและเงื่อนไข</a>
    </span>
  </div>

  <button class="pay-btn" id="payBtn" onclick="pay()" disabled>
    ดำเนินการชำระเงิน
  </button>
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <h3>ข้อกำหนดและเงื่อนไขการใช้บริการ</h3>
    <p>
      การสั่งซื้อไม่สามารถยกเลิก แก้ไข หรือขอคืนเงินได้ทุกกรณี
      ลูกค้าต้องตรวจสอบลิงก์ให้ถูกต้องก่อนยืนยันคำสั่งซื้อ
      การกดยอมรับถือว่ายินยอมตามเงื่อนไขทั้งหมด
    </p>
    <p>
      • ผู้ติดตาม → ราคา/คน<br>
      • ถูกใจ → ราคา/ไลก์<br>
      • วิว → ราคา/วิว<br>
      • คอมเมนท์ → 1 บรรทัด = 1 คอมเมนท์
    </p>
    <button onclick="closePopup()">รับทราบ</button>
  </div>
</div>

<script>
const services={
 followers_inter:{min:50,max:10000,rate:q=>q<100?0.6:q<500?0.5:q<1000?0.4:0.256},
 followers_th:{min:20,max:5000,rate:q=>1.39},
 likes_inter:{min:50,max:10000,rate:q=>q<500?0.3:q<1000?0.25:q<5000?0.22:0.2},
 likes_th:{min:20,max:2000,rate:q=>q<100?2.5:q<500?2:1.8},
 views_inter:{min:1000,max:100000,rate:q=>0.05},
 views_th:{min:1000,max:10000,rate:q=>0.1},
 comment_th:{min:10,max:50,rate:q=>5}
};

function updateForm(){
  const s = services[service.value];
  quantity.min = s.min;
  quantity.max = s.max;

  commentBox.style.display = service.value === 'comment_th' ? 'block' : 'none';
  linkLabel.innerText = service.value.includes('followers')
    ? 'ลิงก์ช่อง TikTok'
    : 'ลิงก์คลิป TikTok';

  quantity.value = s.min; // ⭐ สำคัญมาก
  calculate();
}

function calculate(){
 const s=services[service.value];
 const q=Number(quantity.value||0);
 limitText.innerText=`ขั้นต่ำ ${s.min} / สูงสุด ${s.max}`;
if(q<s.min||q>s.max){
  totalPrice.innerText='-';
  discountText.innerText='กรุณาใส่จำนวนตามเงื่อนไข';
  payBtn.disabled = true;
  return;
}
 const r=s.rate(q);
 unitPrice.innerText=`ราคา ${r.toFixed(2)} บาท / หน่วย`;
 totalPrice.innerText=(q*r).toFixed(2)+' บาท';
 discountText.innerText=q>=500?'ซื้อจำนวนมาก ราคาจะลดอัตโนมัติ':'';
 summaryBox.innerHTML=
  `สรุปรายการสั่งซื้อ<br>
   บริการ: ${service.options[service.selectedIndex].text}<br>
   จำนวน: ${q}`;
 checkButton();
}

function checkButton(){
 payBtn.disabled=!agree.checked||!link.value;
}

function openPopup(){popup.style.display='flex'}
function closePopup(){popup.style.display='none'}

<script>
function pay(){
 const payload={
  service:service.value,
  quantity:quantity.value,
  link:link.value,
  comment: typeof commentText !== "undefined" ? commentText.value : ""
 };

 fetch('https://script.google.com/macros/s/AKfycbw0qmn67SXdN0RPPS9wPUyp8L4MpBfUXxWrqGP5GsXd5SyreFcPtcoVgwv6PDauweqG/exec',{
  method:'POST',
  headers:{
    "Content-Type":"application/json"
  },
  body:JSON.stringify(payload)
 })
 .then(r=>r.json())
 .then(d=>{
   if(d.checkout_url){
     window.location.href = d.checkout_url;
   }else{
     alert("ระบบไม่สามารถสร้างลิงก์ชำระเงินได้");
     console.log(d);
   }
 })
 .catch(err=>{
   alert('ไม่สามารถเชื่อมต่อระบบได้');
   console.error(err);
 });
}
</script>

</body>
</html>
