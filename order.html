<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ | SocialBoostTH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg-main:#0b0216;
  --bg-card:#14062b;
  --border:#3b1775;
  --purple:#8b5cf6;
  --pink:#ec4899;
  --soft:rgba(255,255,255,.75);
  --green:#22c55e;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:
    radial-gradient(1000px 500px at top,#2a0d52,transparent),
    linear-gradient(180deg,var(--bg-main),#14032a);
  color:#fff;
}
.container{
  max-width:420px;
  margin:30px auto;
  padding:26px;
  background:linear-gradient(180deg,#1a0936,var(--bg-card));
  border-radius:22px;
  box-shadow:0 25px 70px rgba(0,0,0,.55);
}
h1{
  margin:0;
  text-align:center;
  font-size:26px;
  font-weight:900;
  background:linear-gradient(90deg,var(--purple),var(--pink));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.sub{
  text-align:center;
  margin:12px 0 22px;
  color:var(--soft);
  font-size:14px;
}
.card{
  background:rgba(255,255,255,.04);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  margin-bottom:14px;
}
label{font-size:14px;color:#e9d5ff}
input{
  width:100%;
  padding:14px;
  margin-top:8px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#120725;
  color:#fff;
}
.row{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
  font-size:14px;
  color:var(--soft);
}
.total{
  font-size:22px;
  font-weight:900;
  color:#fbcfe8;
  text-align:center;
}
.save{
  margin-top:8px;
  text-align:center;
  font-size:14px;
  color:var(--green);
  font-weight:800;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  font-weight:800;
  cursor:pointer;
  background:linear-gradient(90deg,var(--purple),var(--pink));
  color:#fff;
}
.back{background:#1e293b;margin-top:10px}
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99;
}
</style>
</head>

<body>

<div class="container">
  <h1>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h1>
  <div class="sub">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</div>

  <div class="card">
    <b id="serviceName">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏ä‡∏≤‡∏ï‡∏¥ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô)</b><br>
    <span class="sub">‡∏£‡∏≤‡∏Ñ‡∏≤ <span id="unitPrice">0.256</span> ‡∏ö‡∏≤‡∏ó / ‡∏Ñ‡∏ô</span>
  </div>

  <div class="card">
    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
    <input id="qty" type="number" value="1000" min="50" max="10000">
  </div>

  <div class="card">
    <div class="row"><span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥</span><span id="normalPrice">0.00</span></div>
    <div class="row"><span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span><span id="discountPrice">-0.00</span></div>
    <hr style="border:0;border-top:1px solid #2e1065;margin:10px 0">
    <div class="total">‡∏£‡∏ß‡∏° <span id="totalPrice">0.00</span> ‡∏ö‡∏≤‡∏ó</div>
    <div class="save" id="saveText"></div>
  </div>

  <button onclick="openPolicy()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
  <button class="back" onclick="history.back()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<!-- POLICY -->
<div class="popup" id="policy">
  <div class="card">
    <b>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</b><br><br>
    <div class="sub" style="text-align:left">
      ‚Ä¢ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡πÑ‡∏°‡πà‡πÄ‡∏ï‡∏¥‡∏°‡∏¢‡∏≠‡∏î‡∏ó‡∏î‡πÅ‡∏ó‡∏ô‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ<br>
      ‚Ä¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠<br>
      ‚Ä¢ ‡∏´‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô 24 ‡∏ä‡∏°. ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ LINE ‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    </div>
    <label><input type="checkbox" id="accept"> ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
    <button onclick="confirmOrder()" style="margin-top:10px">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
    <button class="back" onclick="closePolicy()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const SHEET_ID = "10hFozE-vcdtPhX7KiGs3JTndpvxbUNDHDzhpvPxIz-4";
const DISCOUNT_API = `https://opensheet.elk.sh/${SHEET_ID}/discounts`;

const SERVICE_CODE = "TT_FOLLOW_INT_NO"; // üëà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á
const PRICE_PER_UNIT = 0.256;

/* ===== ELEMENTS ===== */
const qty = document.getElementById("qty");
const normal = document.getElementById("normalPrice");
const discount = document.getElementById("discountPrice");
const total = document.getElementById("totalPrice");
const save = document.getElementById("saveText");

/* ===== STATE ===== */
let discounts = [];

/* ===== LOAD DISCOUNT RULES ===== */
fetch(DISCOUNT_API)
  .then(r=>r.json())
  .then(data=>{
    discounts = data.filter(d=>d.service_code === SERVICE_CODE)
      .sort((a,b)=>b.min_qty - a.min_qty); // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
    calc();
  });

/* ===== CALCULATION ===== */
function calc(){
  const q = Number(qty.value||0);
  const normalPrice = q * PRICE_PER_UNIT;

  let rule = discounts.find(d => q >= Number(d.min_qty));
  let discountAmount = 0;

  if(rule){
    discountAmount = normalPrice * (Number(rule.discount_percent)/100);
    save.innerText = `üî• ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î ${discountAmount.toFixed(2)} ‡∏ö‡∏≤‡∏ó (${rule.label})`;
  }else{
    save.innerText = "";
  }

  normal.innerText = normalPrice.toFixed(2);
  discount.innerText = "-" + discountAmount.toFixed(2);
  total.innerText = (normalPrice - discountAmount).toFixed(2);
}

qty.oninput = calc;

/* ===== UI ===== */
function openPolicy(){ policy.style.display="flex"; }
function closePolicy(){ policy.style.display="none"; }
function confirmOrder(){
  if(!accept.checked){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç"); return; }
  alert("‚úÖ ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (demo)");
  location.href="dashboard.html";
}
</script>

</body>
</html>